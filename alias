#!/usr/bin/env bash

# copy folders easier
#usage: cpd directory_to_copy new_directory_name
function cpd(){
  cp -r $1 $2 
}
# copy terraform folder for use as a template
function cpt(){
  cp -r $1 $2
  rm -rf $2/.terraform
  cp -f ~/.dotfiles/templates/main.tf $2/main.tf
}

#make file executable 
alias x="chmod 755 "
#my bash todo list 

alias todo="vi ~/todo"

#connect to vpn from terminal
#uses user password from keychain
#additional script at /usr/local/bin/_vpn_autoconnect is used
#see: github.com/2uinc/devops-patters/team-process/onboarding.md
vpn ()
{
    local command="${1:-status}";
    local -r _vpn_bin='/opt/cisco/anyconnect/bin/vpn';
    local -r _vpn_net='2U Corp Network';
    case "$command" in
        s | status)
            echo -e 'Checking current VPN status...\n';
            eval "${_vpn_bin} -s state"
        ;;
        c | connect)
            echo -e 'Connecting to VPN...\n';
            _vpn_autoconnect
        ;;
        d | disconnect)
            echo -e 'Disconnecting from VPN...\n';
            eval "${_vpn_bin} -s disconnect"
        ;;
        *)
            echo "Invalid option '${command}' ([s]tatus|[c]onnect|[d]isconnect)";
            return 1
        ;;
    esac
}
#AWS creds generator
alias 2l="__auto_2u_login"
#modify this file in v1i
alias va="vi ~/.alias" 
#config files and shortcuts
alias dot="cd ~/.dotfiles" 
alias vs="vi ~/.ssh/config"
#Git Shortcuts 
alias gst="git status"
alias gph="git push "
alias gbr="git branch "
alias gco="git checkout "
alias gl="git log --pretty=oneline -n 20 --graph"
# Shortcuts
alias home="cd $home"
alias up="cd .." 
alias dl="cd ~/Downloads/ "
alias dev="cd ~/dev/ "
alias awsd="cd ~/aws/ "
alias inf="cd ~/aws/tf-it-inf-acct "
alias ue1="cd ~/aws/tf-it-inf-acct/resources/ue1 "
alias uw1="cd ~/aws/tf-it-inf-acct/resources/uw1 "
alias sandbox="cd ~/aws/tf-inf-sandbox/ "
alias gr="cd ~/aws/tf-it-inf-acct/global-resources"
#terraform
alias tfaa="terraform apply --auto-approve"
alias tfi="terraform init"
alias tfp="terraform plan"
alias tfa="terraform apply"
alias tf="terraform " #space at ends allows tf as shortcut for terraform but can add command at end
alias tfwp="terraform workspace select prod"
alias tfwd="terraform workspace select dev" 
alias tfwn="terraform workspace new "
#ansible
alias ansp="ansible-playbook "

#aws commands 

#show ec2 info 
#usage: ec2 <tag:name> 
function ec2(){
  aws ec2 describe-instances --filters "Name=tag:Name,Values=$1" --profile sub --region=$2 --output table
}

#connects Windows Admin Center to https://wac
#need to map in hosts localhost:443 -> wac
alias wac-tunnel="mole tunnel 9443:UE1MGMT01:443 --profile sub --region us-east-1"

#add rdp tunnel 
#usage:
#   rdp-tunnel <hostname> <region>
#          Hostname: value of tag:Name
#          Region: region of host (i.e us-east-1 )
function rdp-tunnel(){
  mole tunnel 3389:$1:3389 --region $2 --profile sub
}
#source my aliases i've stolen from others 
source ~/.dotfiles/stolen_aliases
